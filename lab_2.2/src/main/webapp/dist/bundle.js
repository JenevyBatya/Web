(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){let e=document.getElementById("errorBlock");e.style.display="flex",e.textContent=t,setTimeout((function(){e.style.display="none"}),5e3)}function n(t,n,d,i){let r=!1,a=!1,u=!1,s=[];if(t.length>0?t[0]instanceof Element?t.forEach((function(t){s.push(t.value)})):s.push(t[0]):r=!0,(!/^(-?\d+|-?\d+\.\d+)$/.test(n)||parseFloat(o(n))<-3||parseFloat(o(n))>5)&&(a=!0),d||(u=!0),r)return e("Выберите хотя бы один чекбокс"),null;if(a)return e("Невалидные данные в поле Y"),null;if(u)return e("Выберите R"),null;{let t={X:s,Y:n,R:d.value};console.log("Sent data",t),fetch("/pathetic",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>{if(t.ok)return t.json();throw new Error("Ошибка HTTP: "+t.status)})).then((t=>{console.log("Accepted data",t),function(t){try{0!==t[0].length&&t.forEach((t=>{const e=document.createElement("tr"),n=document.createElement("td");n.textContent=t.X,e.appendChild(n);const o=document.createElement("td");o.textContent=t.Y,e.appendChild(o);const d=document.createElement("td");d.textContent=t.R,e.appendChild(d);const i=document.createElement("td");i.textContent=t.status,e.appendChild(i);const r=document.createElement("td");r.textContent=t.date,e.appendChild(r);const a=document.createElement("td");a.textContent=t.time,e.appendChild(a),e.addEventListener("click",(function(){c(e)})),document.getElementById("table_for_results").appendChild(e);let u=document.getElementById("OXY");l(t.X,t.Y,t.status,u)}))}catch(t){}}(t),0!==t[0].length&&i(t[0].status)}))}}function o(t){const e=t.split(".");let n="";const o=/\d+/;if(2===e.length){const t=e[0],c=e[1];let l="0";for(let e=0;e<c.length;e++){const d=c[e];if(o.test(d)&&o.test(t)){if(parseInt(d,10)>0){l="0".repeat(Math.min(5,e))+d,n=`${t}.${l}`;break}}else n="a"}}else n=o.test(e[0])?e[0]:"a";return n}function c(t){let e=t.getElementsByTagName("td");const n=`http://localhost:8080/pathetic/result?x=${e[0].textContent}&y=${e[1].textContent}&r=${e[2].textContent}&result=${e[3].textContent}&date=${e[4].textContent}&time=${e[5].textContent}`;window.open(n,"_blank")}function l(t,e,n,o){let c=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=50*t+250,d=250-50*e;c.setAttribute("cx",l),c.setAttribute("cy",d),c.setAttribute("r",2),c.setAttribute("opacity","0.5"),"Попадание"===n?c.setAttribute("fill","#99E350"):c.setAttribute("fill","red"),o.appendChild(c)}t.d({},{Q:()=>l}),document.addEventListener("DOMContentLoaded",(function(){window.onload=function(){!function(){let t=document.getElementById("table_for_results");for(let e=0;e<t.rows.length;e++){let n=t.rows[e];n.addEventListener("click",(function(){c(n)}))}}()},document.getElementById("final_button").addEventListener("click",(function(){n(document.querySelectorAll('input[type="checkbox"]:checked'),document.getElementById("choose_y").value,document.querySelector('input[type="radio"]:checked'))}))})),document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("svg_graph"),e=document.getElementById("OXY");document.getElementById("points");let o=0;document.querySelectorAll('input[type="radio"][name="option"]').forEach((t=>{t.addEventListener("change",(()=>{o=t.value,function(t){const e=document.getElementById("svg_graph"),n=document.getElementById("dynamicRect"),o=document.getElementById("dynamicCircle"),c=document.getElementById("dynamicTriangle");n&&e.removeChild(n),o&&e.removeChild(o),c&&e.removeChild(c);const l=document.createElementNS("http://www.w3.org/2000/svg","rect"),d=document.createElementNS("http://www.w3.org/2000/svg","path"),i=document.createElementNS("http://www.w3.org/2000/svg","polygon");l.setAttribute("id","dynamicRect"),l.setAttribute("x",250),l.setAttribute("y",250-50*t*.5),l.setAttribute("width",50*t),l.setAttribute("height",50*t*.5),l.setAttribute("fill","#5b6ca3"),e.appendChild(l),d.setAttribute("id","dynamicCircle");const r=25*t,a=`M 250 250 L ${250+r*Math.cos(Math.PI/180*0)} ${250+r*Math.sin(Math.PI/180*0)} A ${r} ${r} 0 0 1 ${250+r*Math.cos(Math.PI/180*90)} ${250+r*Math.sin(Math.PI/180*90)} Z`;d.setAttribute("d",a),d.setAttribute("fill","#5b6ca3"),e.appendChild(d),i.setAttribute("id","dynamicTriangle");let u=250-50*t,s=250+50*t*.5;i.setAttribute("points",u+",250 250,250 250,"+s),i.setAttribute("fill","#5b6ca3"),e.appendChild(i)}(o)}))})),e.addEventListener("click",(function(o){let c=o.clientX-t.getBoundingClientRect().left,d=o.clientY-t.getBoundingClientRect().top,i=document.querySelector('input[type="radio"]:checked'),r=-(250-c)/50,a=(250-d)/50;n([""+r],""+a,i,(function(t){l(r,a,t,e)}))}))}))})();